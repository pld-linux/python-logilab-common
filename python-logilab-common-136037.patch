
# HG changeset patch
# User Sylvain Th√©nault <sylvain.thenault@logilab.fr>
# Date 1367243985 -7200
# Node ID 0cda985d7d272d15690b482f1a17ddb801b2b303
# Parent  3caeb222b550dceaf6e1e9bf20138e872b9c9fab
[modutils] fix typo causing name error in python3 / bad message in python2. Closes #136037

diff -r 3caeb222b550 -r 0cda985d7d27 ChangeLog
--- a/ChangeLog	Wed Apr 17 11:37:27 2013 +0200
+++ b/ChangeLog	Mon Apr 29 15:59:45 2013 +0200
@@ -1,6 +1,11 @@
 ChangeLog for logilab.common
 ============================
 
+--
+    * modutils: fix typo causing name error in python3 / bad message in python2
+      (#136037)
+
+
 2013-04-16  --  0.59.1
     * graph: added pruning of the recursive search tree for detecting cycles in
       graphs (closes #2469)
diff -r 3caeb222b550 -r 0cda985d7d27 modutils.py
--- a/modutils.py	Wed Apr 17 11:37:27 2013 +0200
+++ b/modutils.py	Mon Apr 29 15:59:45 2013 +0200
@@ -1,5 +1,5 @@
 # -*- coding: utf-8 -*-
-# copyright 2003-2012 LOGILAB S.A. (Paris, FRANCE), all rights reserved.
+# copyright 2003-2013 LOGILAB S.A. (Paris, FRANCE), all rights reserved.
 # contact http://www.logilab.fr/ -- mailto:contact@logilab.fr
 #
 # This file is part of logilab-common.
@@ -570,7 +570,7 @@
             if importer.find_module(modpath[0]):
                 if not importer.find_module('/'.join(modpath)):
                     raise ImportError('No module named %s in %s/%s' % (
-                        '.'.join(modpath[1:]), file, modpath))
+                        '.'.join(modpath[1:]), filepath, modpath))
                 return ZIPFILE, abspath(filepath) + '/' + '/'.join(modpath), filepath
     raise ImportError('No module named %s' % '.'.join(modpath))
 

